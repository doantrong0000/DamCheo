<UserControl x:Class="BimSpeedStructureBeamDesign.BeamRebar.View.SubViews.AddBotBarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:p="clr-namespace:BimSpeedStructureBeamDesign.Properties"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:Converters="clr-namespace:BimSpeedUtils.WPFUtils.Converters;assembly=BimSpeedUtils"
             xmlns:converter="clr-namespace:BimSpeedStructureBeamDesign.BeamRebar.Converter"
             mc:Ignorable="d">
    <FrameworkElement.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BimSpeedStructureBeamDesign;component/Resources/ResourceString.en.xaml" />
                <ResourceDictionary Source="pack://application:,,,/BimSpeedUtils;component/WPFUtils/ResourceDictionaries/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="ComboBox"
                   BasedOn="{StaticResource ResourceKey=ComboBoxStyle}">
                <Setter Property="Height"
                        Value="25" />
                <Setter Property="BorderBrush"
                        Value="Gray" />
            </Style>
            <Style TargetType="TextBox"
                   BasedOn="{StaticResource ResourceKey=TextBoxStyle}">
                <Setter Property="Height"
                        Value="25" />
                <Setter Property="BorderBrush"
                        Value="Gray" />
            </Style>
            <Style TargetType="Button"
                   BasedOn="{StaticResource ResourceKey=ButtonStyle}" />
            <Converters:FeetToIntString x:Key="FeetToIntString" />
            <converter:WidthConverter x:Key="WidthConverter" />

            <Converters:NullToBoolConverter x:Key="NullableToBoolConverter" />

            <Converters:RevitDiameterToStringConverter x:Key="RevitDiameterToStringConverter" />

        </ResourceDictionary>
    </FrameworkElement.Resources>


    <DockPanel>
        <GroupBox   Header="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_REBARLIST}">
            <ListView Name="LvAdditionalBottomBars"
                      ItemsSource="{Binding AllBars}"
                      SelectedItem="{Binding SelectedBar}">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment"
                                Value="Stretch" />
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Layer"
                                        Width="150"
                                        DisplayMemberBinding="{Binding Name}" />

                    </GridView>
                </ListView.View>
            </ListView>
        </GroupBox>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition   Width="{Binding IsShowSection,Mode=OneWay,Converter={StaticResource WidthConverter}}" />

            </Grid.ColumnDefinitions>

            <GroupBox MinWidth="400"
                      Header="{DynamicResource BEAMREBAR_ADDTOPBARVIEW_REBARINFO}">
                <DockPanel>
                    <Grid DockPanel.Dock="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Button Command="{Binding AddRebarCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="0"
                                Content="{DynamicResource COMMON_BUTTON_ADD}" />
                        <Button Command="{Binding NextRebarCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="1"
                                Content="{DynamicResource COMMON_BUTTON_NEXT}" />
                        <Button Command="{Binding DeleteRebarCommand}"
                                CommandParameter="{Binding ElementName=LvAdditionalBottomBars }"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="2"
                                Content="{DynamicResource COMMON_BUTTON_DELETE}" />
                        <Button Command="{Binding DeleteAllCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="3"
                                Content="{DynamicResource COMMON_BUTTON_DELETEALL}" />
                    </Grid>
                    <Grid DockPanel.Dock="Top"
                          IsEnabled="{Binding SelectedBar,Converter={StaticResource NullableToBoolConverter}}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="0.8*" />
                            <ColumnDefinition />
                            <ColumnDefinition Width="0.8*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="35" />
                            <RowDefinition Height="5" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="35" />
                            <RowDefinition Height="5" />
                            <RowDefinition Height="35" />
                        </Grid.RowDefinitions>
                        <Separator Grid.Row="1"
                                   Background="IndianRed"
                                   Grid.Column="0"
                                   Grid.ColumnSpan="4"
                                   VerticalAlignment="Top" />
                        <TextBlock Grid.Row="0"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_LAYER}" />
                        <TextBlock Grid.Row="0"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_DIAMETER}" />
                        <TextBlock Grid.Row="2"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_STARTPOINT}" />
                        <TextBlock Grid.Row="3"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_STARTTYPE}" />
                        <TextBlock Grid.Row="2"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_ENDPOINT}" />

                        <TextBlock Grid.Row="3"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_ENDTYPE}" />
                        <ComboBox Grid.Row="0"
                                  DisplayMemberPath="Name"
                                  ItemsSource="{Binding SelectedBar.Layers}"
                                  SelectedItem="{Binding SelectedBar.Layer}"
                                  Grid.Column="1" />
                        <ComboBox ItemsSource="{Binding BeamRebarRevitData.BarDiameters}"
                                  SelectedItem="{Binding SelectedBar.BarDiameter}"
                                  Grid.Row="0"
                                  Height="26"
                                  Grid.Column="3">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Converter={StaticResource RevitDiameterToStringConverter}}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        <ComboBox ItemsSource="{Binding SelectedBar.Starts}"
                                  SelectedItem="{Binding SelectedBar.Start}"
                                  Grid.Row="2"
                                  Grid.Column="1" />
                        <ComboBox   ItemsSource="{Binding SelectedBar.RebarEndTypes}"
                                    SelectedItem="{Binding SelectedBar.RebarStartType}"
                                    Grid.Row="3"
                                    Grid.Column="1" />
                        <ComboBox  ItemsSource="{Binding SelectedBar.Ends}"
                                   SelectedItem="{Binding SelectedBar.End}"
                                   Grid.Row="2"
                                   Grid.Column="3" />
                        <ComboBox  ItemsSource="{Binding SelectedBar.RebarEndTypes}"
                                   SelectedItem="{Binding SelectedBar.RebarEndType}"
                                   Grid.Row="3"
                                   Grid.Column="3" />

                        <Grid Grid.Row="4"
                              Grid.Column="0"
                              Grid.ColumnSpan="4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_LEFTRADIO}" />
                            <TextBox  Text="{Binding SelectedBar.LeftRatio,UpdateSourceTrigger=PropertyChanged,NotifyOnTargetUpdated=True}"
                                      Grid.Column="1" />

                            <TextBlock Grid.Column="2"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_RIGHTRADIO}" />
                            <TextBox  Text="{Binding SelectedBar.RightRatio,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True}"
                                      Grid.Column="3" />
                        </Grid>
                        <Grid Grid.Row="5"
                              Grid.Column="0"
                              Grid.ColumnSpan="4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_LEFTLENGTH}" />
                            <TextBox PreviewTextInput="UIElement_OnPreviewTextInput"
                                     Text="{Binding SelectedBar.LeftLength,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                     Grid.Column="1" />
                            <TextBlock Grid.Column="2"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_RIGHTLENGTH}" />
                            <TextBox PreviewTextInput="UIElement_OnPreviewTextInput"
                                     Text="{Binding SelectedBar.RightLength,Converter={StaticResource FeetToIntString},UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True}"
                                     Grid.Column="3" />
                        </Grid>

                        <Grid Grid.Row="6"
                              Grid.Column="0"
                              Grid.ColumnSpan="4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                                <ColumnDefinition />
                                <ColumnDefinition Width="0.8*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_ANCHORLEFT}" />
                            <TextBox PreviewTextInput="UIElement_OnPreviewTextInput"
                                     Text="{Binding SelectedBar.AnchorLeft,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                     Grid.Column="1" />
                            <TextBlock Grid.Column="2"
                                       Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_ANCHORRIGHT}" />
                            <TextBox PreviewTextInput="UIElement_OnPreviewTextInput"
                                     Text="{Binding SelectedBar.AnchorRight,Converter={StaticResource FeetToIntString},UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True}"
                                     Grid.Column="3" />
                        </Grid>
                        <TextBlock Grid.Column="0"
                                   Grid.Row="7"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_TOTAL}" />
                        <TextBox PreviewTextInput="UIElement_OnPreviewTextInput"
                                 Text="{Binding SelectedBar.TotalLength,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                 Grid.Column="1"
                                 Grid.Row="7" />
                        <Separator Background="IndianRed"
                                   Grid.Row="8"
                                   Grid.Column="0"
                                   Grid.ColumnSpan="4" />

                        <ComboBox SelectedItem="{Binding SelectedBar.SelectedNumberOfRebar}"
                                  ItemsSource="{Binding SelectedBar.NumberOfRebarList}"
                                  Grid.Row="9"
                                  Grid.Column="1" />
                        <TextBlock Grid.Row="9"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_NUMBER}" />

                        <TextBlock Grid.Row="9"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_POSITIONINSECTION}" />
                        <Button Grid.Row="9"
                                Grid.Column="3"
                                IsEnabled="False"
                                CommandParameter="{Binding ElementName=LvAdditionalBottomBars}"
                                Content="{Binding SelectedBar.RebarPointsInSectionString}"
                                Command="{Binding SelectedBar.PositionInSectionCommand}"
                                HorizontalAlignment="Stretch"
                                Width="Auto" />
                    </Grid>
                </DockPanel>
            </GroupBox>

            <GroupBox Grid.Column="1"
                      Header="{DynamicResource BEAMREBAR_ADDBOTBARVIEW_IMAGE}">
                <Image Source="../Images/ADD-BOT-BAR.png" />
            </GroupBox>
        </Grid>

    </DockPanel>
</UserControl>