<UserControl x:Class="BimSpeedStructureBeamDesign.BeamRebar.View.SubViews.MainBotBarView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:Converters="clr-namespace:BimSpeedUtils.WPFUtils.Converters;assembly=BimSpeedUtils"
             xmlns:p="clr-namespace:BimSpeedStructureBeamDesign.Properties"
             xmlns:converter="clr-namespace:BimSpeedStructureBeamDesign.BeamRebar.Converter"
             mc:Ignorable="d">
    <FrameworkElement.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BimSpeedStructureBeamDesign;component/Resources/ResourceString.en.xaml" />
                <ResourceDictionary Source="pack://application:,,,/BimSpeedUtils;component/WPFUtils/ResourceDictionaries/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style TargetType="ComboBox"
                   BasedOn="{StaticResource ResourceKey=ComboBoxStyle}">
                <Setter Property="Height"
                        Value="30" />
                <Setter Property="BorderBrush"
                        Value="Gray" />
            </Style>
            <Style TargetType="TextBox"
                   BasedOn="{StaticResource ResourceKey=TextBoxStyle}">
                <Setter Property="Height"
                        Value="30" />
                <Setter Property="BorderBrush"
                        Value="Gray" />
            </Style>
            <Style TargetType="Button"
                   BasedOn="{StaticResource ResourceKey=ButtonStyle}" />
            <Converters:FeetToIntString x:Key="FeetToIntString" />
            <Converters:NullToBoolConverter x:Key="NullableToBoolConverter" />
            <converter:WidthConverter x:Key="WidthConverter" />

            <Converters:RevitDiameterToStringConverter x:Key="RevitDiameterToStringConverter" />


        </ResourceDictionary>
    </FrameworkElement.Resources>


    <DockPanel>
        <GroupBox   Header="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_REBARLIST}">
            <ListView Name="LvMainBarInBottom"
                      SelectedItem="{Binding SelectedMainBar}"
                      ItemsSource="{Binding MainRebars}"
                      d:ItemsSource="{d:SampleData ItemCount=5}">
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment"
                                Value="Stretch" />
                    </Style>
                </ListView.ItemContainerStyle>
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Rebar Name"
                                        Width="150"
                                        DisplayMemberBinding="{Binding Name}" />

                    </GridView>
                </ListView.View>
            </ListView>
        </GroupBox>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition   Width="{Binding IsShowSection,Mode=OneWay,Converter={StaticResource WidthConverter}}" />
            </Grid.ColumnDefinitions>

            <GroupBox MinWidth="300"
                      Header="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_REBARINFO}">
                <DockPanel>

                    <Grid IsEnabled="{Binding SelectedMainBar,Converter={StaticResource NullableToBoolConverter}}"
                          DockPanel.Dock="Top">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40" />
                            <RowDefinition Height="40" />
                            <RowDefinition Height="40" />
                            <RowDefinition Height="40" />
                            <RowDefinition Height="40" />

                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_DIAMETER}" />
                        <TextBlock Grid.Row="1"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_STARTPOINT}" />
                        <TextBlock Grid.Row="1"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_ENDPOINT}" />

                        <ComboBox  ItemsSource="{Binding BeamRebarRevitData.BarDiameters}"
                                   SelectedItem="{Binding SelectedMainBar.BarDiameter}"
                                   Grid.Row="0"
                                   Grid.Column="1">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Converter={StaticResource RevitDiameterToStringConverter}}" />
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                        <ComboBox SelectedItem="{Binding SelectedMainBar.Start}"
                                  ItemsSource="{Binding SelectedMainBar.Starts}"
                                  Grid.Row="1"
                                  Grid.Column="1" />
                        <ComboBox SelectedItem="{Binding SelectedMainBar.End}"
                                  ItemsSource="{Binding SelectedMainBar.Ends}"
                                  Grid.Row="1"
                                  Grid.Column="3" />
                        <ComboBox SelectedItem="{Binding SelectedMainBar.SelectedNumberOfRebar}"
                                  ItemsSource="{Binding SelectedMainBar.NumberOfRebarList}"
                                  Grid.Row="0"
                                  Grid.Column="3" />
                        <TextBlock Grid.Row="0"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_NUMBER}" />
                        <TextBlock Grid.Row="4"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_POSITIONINSECTION}" />
                        <Button Grid.Row="4"
                                Grid.Column="1"
                                IsEnabled="False"
                                Content="{Binding SelectedMainBar.RebarPointsInSectionString}"
                                Command="{Binding SelectedMainBar.PositionInSectionCommand}"
                                HorizontalAlignment="Stretch"
                                Width="Auto" />
                        <TextBlock Grid.Row="2"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_ANCHORLEFT}" />

                        <TextBox Grid.Row="2"
                                 PreviewTextInput="UIElement_OnPreviewTextInput"
                                 Text="{Binding SelectedMainBar.LyTrai,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                 Grid.Column="1" />
                        <TextBlock Grid.Row="3"
                                   Grid.Column="0"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_ANCHORXLEFT}"
                                   />

                        <TextBox Grid.Row="3"
                                 PreviewTextInput="UIElement_OnPreviewTextInput"
                                 Text="{Binding SelectedMainBar.LxTrai,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                 Grid.Column="1" />

                        <TextBlock Grid.Row="2"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_ANCHORRIGHT}" />

                        <TextBox Grid.Row="2"
                                 PreviewTextInput="UIElement_OnPreviewTextInput"
                                 Text="{Binding SelectedMainBar.LyPhai,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                 Grid.Column="3" />
                        <TextBlock Grid.Row="3"
                                   Grid.Column="2"
                                   Text="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_ANCHORXRIGHT}" />

                        <TextBox Grid.Row="3"
                                 PreviewTextInput="UIElement_OnPreviewTextInput"
                                 Text="{Binding SelectedMainBar.LxPhai,UpdateSourceTrigger=PropertyChanged,NotifyOnSourceUpdated=True,Converter={StaticResource FeetToIntString}}"
                                 Grid.Column="3" />
                    </Grid>
                    <Grid DockPanel.Dock="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Button Command="{Binding AddRebarCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="0"
                                Content="{DynamicResource COMMON_BUTTON_ADD}" />
                        <Button Command="{Binding NextRebarCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="1"
                                Content="{DynamicResource COMMON_BUTTON_NEXT}" />
                        <Button Command="{Binding DeleteRebarCommand}"
                                Margin="5"
                                Height="25"
                                CommandParameter="{Binding ElementName=LvMainBarInBottom}"
                                VerticalAlignment="Bottom"
                                Grid.Column="2"
                                Content="{DynamicResource COMMON_BUTTON_DELETE}" />
                        <Button Command="{Binding DeleteAllCommand}"
                                Margin="5"
                                Height="25"
                                VerticalAlignment="Bottom"
                                Grid.Column="3"
                                Content="{DynamicResource COMMON_BUTTON_DELETEALL}" />
                    </Grid>
                </DockPanel>
            </GroupBox>

            <GroupBox Grid.Column="1"
                      Header="{DynamicResource BEAMREBAR_MAINBOTBARVIEW_IMAGE}">
                <Image MaxHeight="150"
                       MaxWidth="500"
                       Source="../Images/MainBotRebarLxLy.png" />
            </GroupBox>
        </Grid>

    </DockPanel>
</UserControl>