<Window x:Class="BimSpeedStructureBeamDesign.BeamRebar.View.BeamRebarView2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:WPFUtils="clr-namespace:BimSpeedUtils.WPFUtils;assembly=BimSpeedUtils"
        xmlns:geometry="clr-namespace:BimSpeedStructureBeamDesign.BeamRebar.ViewModel"
        xmlns:subViews="clr-namespace:BimSpeedStructureBeamDesign.BeamRebar.View.SubViews"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Title="{DynamicResource BEAMREBAR_TITLE_BEAMREBAR}"
        Name="MainView"
        Icon="/BimSpeedUtils;component/WPFUtils/bimspeed.ico"
        SizeToContent="Height"
        Width="1300">
    <FrameworkElement.Resources>
        <ResourceDictionary>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/BimSpeedStructureBeamDesign;component/Resources/ResourceString.en.xaml" />
                <ResourceDictionary Source="pack://application:,,,/BimSpeedUtils;component/WPFUtils/ResourceDictionaries/Styles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Style TargetType="Button"
                   x:Key="CustomButtonStyle">
                <Setter Property="Background"
                        Value="Transparent" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=IsSelected}"
                                 Value="True">
                        <Setter Property="Background"
                                Value="#FFC8E2C8" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>


            <Style TargetType="Button"
                   BasedOn="{StaticResource ResourceKey=ButtonStyle}" />


            <Style TargetType="CheckBox"
                   BasedOn="{StaticResource ResourceKey=CheckBoxStyle}" />
            <Style TargetType="RadioButton"
                   BasedOn="{StaticResource ResourceKey=RadioButtonStyle}" />
            <Style TargetType="GroupBox"
                   BasedOn="{StaticResource ResourceKey=GroupBoxStyle}" />
            <Style TargetType="ComboBox"
                   BasedOn="{StaticResource ResourceKey=ComboBoxStyle}">
                <Setter Property="Height"
                        Value="23" />
            </Style>
            <Style TargetType="TextBox"
                   BasedOn="{StaticResource ResourceKey=TextBoxStyle}">
                <Setter Property="Height"
                        Value="23" />
            </Style>
            <Style TargetType="ProgressBar"
                   BasedOn="{StaticResource ResourceKey=ProgressBarStyle}" />

            <Style TargetType="TextBlock">
                <Setter Property="FontSize"
                        Value="10" />
            </Style>

            <SolidColorBrush x:Key="DisabledForegroundBrush"
                             Color="#888" />
            <SolidColorBrush x:Key="GlyphBrush"
                             Color="#444" />
            <SolidColorBrush x:Key="NormalBrush"
                             Color="#888" />
            <SolidColorBrush x:Key="NormalBorderBrush"
                             Color="#888" />

            <LinearGradientBrush x:Key="PressedBrush"
                                 StartPoint="0,0"
                                 EndPoint="0,1">
                <GradientBrush.GradientStops>
                    <GradientStopCollection>
                        <GradientStop Color="#BBB"
                                      Offset="0.0" />
                        <GradientStop Color="#EEE"
                                      Offset="0.1" />
                        <GradientStop Color="#EEE"
                                      Offset="0.9" />
                        <GradientStop Color="#FFF"
                                      Offset="1.0" />
                    </GradientStopCollection>
                </GradientBrush.GradientStops>
            </LinearGradientBrush>

            <Style x:Key="BorderCustom"
                   TargetType="Border">
                <Setter Property="BorderThickness"
                        Value="1" />
                <Setter Property="BorderBrush"
                        Value="LightGray" />
                <Setter Property="CornerRadius"
                        Value="6" />
                <Setter Property="Margin"
                        Value="2" />
            </Style>

            <DataTemplate DataType="{x:Type geometry:GeometryViewModel}">
                <subViews:GeometryView />
            </DataTemplate>


            <DataTemplate DataType="{x:Type geometry:MainBarInTopViewModel}">
                <subViews:MainTopBarView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type geometry:MainBarInBottomViewModel}">
                <subViews:MainBotBarView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type geometry:AdditionalTopBarViewModel}">
                <subViews:AddTopBarView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type geometry:AdditionalBottomBarViewModel}">
                <subViews:AddBotBarView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type geometry:StirrupTabViewModel}">
                <subViews:StirrupBarView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type geometry:ThepChongPhinhViewModel}">
                <subViews:ThepChongPhinhView />
            </DataTemplate>

        </ResourceDictionary>
    </FrameworkElement.Resources>
    <Grid Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="370" />
            <RowDefinition Height="300" />
            <RowDefinition Height="40" />
        </Grid.RowDefinitions>


        <DockPanel Dock="Top"
                   LastChildFill="True">
            <GroupBox Header="{DynamicResource BEAMREBAR_BEAMREBARVIEW2_SETTING}"
                      Width="168"
                      Visibility="Visible"
                      DockPanel.Dock="Left">
                <ItemsControl ItemsSource="{Binding PageViewModels}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button Style="{StaticResource CustomButtonStyle}"
                                    BorderThickness="0"
                                    Width="Auto"
                                    Height="45"
                                    HorizontalContentAlignment="Left"
                                    HorizontalAlignment="Stretch"
                                    Margin="2"
                                    Command="{Binding DataContext.ChangePageCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"
                                    CommandParameter="{Binding }">
                                <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center">
                                    <Image Height="35"
                                           Stretch="Fill"
                                           Source="{Binding Image}" />
                                    <TextBlock Height="25"
                                               Margin="4"
                                               Text="{Binding Name}" />
                                </StackPanel>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </GroupBox>

            <GroupBox   DockPanel.Dock="Right"
                        Name="GroupSection"
                        Visibility="Collapsed"
                        Header="{DynamicResource BEAMREBAR_BEAMREBARVIEW2_SECTION}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition />
                        <RowDefinition Height="60" />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0"
                               Name="tbTest"
                               HorizontalAlignment="Center"
                               Grid.Column="0"
                               Text="{DynamicResource BEAMSPAN:}" />

                    <ComboBox SelectedItem="{Binding SelectedSpanModel}"
                              ItemsSource="{Binding SpanModels}"
                              DisplayMemberPath="Index"
                              Grid.Row="0"
                              Grid.Column="1" />

                    <TextBlock FontWeight="Bold"
                               Foreground="DarkRed"
                               Grid.Column="0"
                               Grid.Row="2"
                               Margin="0,5,0,0"
                               Text="{Binding SelectedSpanModel.SectionUiModel1.SectionName,NotifyOnSourceUpdated=True}"
                               HorizontalAlignment="Center" />
                    <TextBlock FontWeight="Bold"
                               Foreground="DarkRed"
                               Grid.Column="1"
                               Grid.Row="2"
                               Margin="0,5,0,0"
                               Text="{Binding SelectedSpanModel.SectionUiModel2.SectionName}"
                               HorizontalAlignment="Center" />
                    <TextBlock FontWeight="Bold"
                               Foreground="DarkRed"
                               Grid.Column="2"
                               Grid.Row="2"
                               Margin="0,5,0,0"
                               Text="{Binding SelectedSpanModel.SectionUiModel3.SectionName}"
                               HorizontalAlignment="Center" />

                    <Canvas Background="WhiteSmoke"
                            Margin="6"
                            Width="150"
                            Height="250"
                            MouseMove="Canvas1_OnMouseMove"
                            MouseDown="Canvas1_OnMouseDown"
                            Grid.Column="0"
                            Grid.Row="1"
                            Name="Canvas1" />
                    <Canvas Background="WhiteSmoke"
                            Grid.Column="1"
                            Margin="6"
                            Width="150"
                            Height="250"
                            MouseMove="Canvas1_OnMouseMove"
                            MouseDown="Canvas1_OnMouseDown"
                            Grid.Row="1"
                            Name="Canvas2" />
                    <Canvas Background="WhiteSmoke"
                            Grid.Column="2"
                            Margin="6"
                            Width="150"
                            Height="250"
                            MouseMove="Canvas1_OnMouseMove"
                            MouseDown="Canvas1_OnMouseDown"
                            Grid.Row="1"
                            Name="Canvas3" />
                </Grid>
            </GroupBox>

            <ContentControl Content="{Binding CurrentPageViewModel}" />

        </DockPanel>
        <Border Grid.Row="1" BorderBrush="Azure" >
            <ScrollViewer   HorizontalScrollBarVisibility="Auto"
                        VerticalScrollBarVisibility="Disabled"
                        MouseUp="UIElement_OnMouseUp">
                <Canvas Name="Grid"
                    Width="1300"
                    Height="300"
                    VerticalAlignment="Center" />
            </ScrollViewer>
        </Border>



        <Grid 
              Grid.Row="2">

            <StackPanel HorizontalAlignment="Right"
                        Orientation="Horizontal">

                <Button Height="26"
                        Command="{Binding ToggleCommand}"
                        Width="140"
                        Content="{DynamicResource COMMON_BUTTON_TOGGLESECTIONIMAGE}" />

                <Button Name="BtBack"
                        Height="26"
                        Click="BtBack_OnClick"
                        Width="80"
                        Content="{DynamicResource COMMON_BUTTON_BACK}" />

                <Button Command="{Binding OkCommand}"
                        Height="26"
                        Width="80"
                        IsDefault="True"
                        CommandParameter="{Binding ElementName=MainView}"
                        Content="{DynamicResource COMMON_BUTTON_OK}" />

                <Button IsCancel="True"
                        Height="26"
                        BorderThickness="0"
                        Width="80"
                        Content="{DynamicResource COMMON_BUTTON_CLOSE}" />
            </StackPanel>
        </Grid>
    </Grid>
</Window>